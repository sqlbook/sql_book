<main>
  <div class="page-header">
    <h1>Workspaces</h1>
    <%= link_to new_app_workspace_path, class: "link secondary create-workspace", "data-shortcut": "N" do %>
      <i class="ri-add-line red-500"></i>
      <span>Create New</span>
    <% end %>
  </div>

  <div class="workspaces container lg">
    <%= render "shared/workspace_card", workspace: @workspace %>
  </div>
</main>

<aside data-controller="resizeable-page">
  <div class="tabs">
    <%= render "shared/tabs/nav_item", tab: "general", name: "General", icon_class: "ri-global-line", default_selected: true %>
    <%= render "shared/tabs/nav_item", tab: "team", name: "Team", icon_class: "ri-fire-line" %>
    <%= render "shared/tabs/nav_item", tab: "subscription", name: "Subscription", icon_class: "ri-fire-lin" %>
  </div>

  <% if active_tab?(tab: "general", default_selected: true) %>
    -
  <% end %>

  <% if active_tab?(tab: "team") %>
    <div class="members-table">
      <table>
        <tr>
          <th>Name</th>
          <th>Role</th>
          <th>Status</th>
          <th>Actions</td>
        </tr>
        <% @workspace.members.each do |member| %>
          <tr>
            <td><%= member.user.full_name %></td>
            <td><%= member.role_name %></td>
            <td><%= member.status_name %></td>
            <td>
              <% if current_user_role(workspace: @workspace, current_user: @current_user) < member.role %>
                <%= link_to "Remove", app_workspace_member_path(@workspace, member), class: "link primary", data: { turbo_method: :delete } %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </table>
    </div>
  <% end %>

  <% if active_tab?(tab: "subscription") %>
    -
  <% end %>

  <%= render "shared/grab_handle" %>
</aside>
